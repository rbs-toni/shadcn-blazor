@namespace ShadcnBlazor
@inherits ShadcnComponentBase
@inject TwMerge TwMerge

<button id="@Id"
        class="@(TwMerge.Merge(ClassValue))"
        style="@Style" type="button"
        @ref="Ref"
        @attributes="Attributes"
        @onclick=OnClickHandler>
    @ChildContent
</button>

@code {
    [CascadingParameter]
    IDialogInstance? DialogInstance { get; set; }

    void OnClickHandler()
    {
        if (DialogInstance != null)
        {
            DialogInstance.Cancel();
        }
    }

    string? ClassValue => new CssBuilder(Class)
        .AddClass("absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground")
        .Build();
}